var gt=Object.defineProperty;var tt=e=>{throw TypeError(e)};var kt=(e,t,s)=>t in e?gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var b=(e,t,s)=>kt(e,typeof t!="symbol"?t+"":t,s),bt=(e,t,s)=>t.has(e)||tt("Cannot "+s);var T=(e,t,s)=>(bt(e,t,"read from private field"),s?s.call(e):t.get(e)),F=(e,t,s)=>t.has(e)?tt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s);import{h as j,g as yt,aZ as wt,i as ft,a_ as et,H as Et,C as xt,B as Ct,D as Q,q as ct,J as V,ax as Tt,a$ as Nt,b0 as Ot,ao as Bt,W as st,b1 as It,V as rt,b2 as At,E as lt,ac as St,b3 as Rt,aQ as Ft,e as Lt,b4 as Mt,an as Pt,b5 as S,w as ut,u as Dt,b6 as qt,b7 as zt,as as W,v as p,ab as P,at as Ht,aa as Ut,p as dt,f as w,a as vt,b8 as jt,s as Gt}from"./BC4EkEQe.js";import{b as Wt,c as N,a as E,f as Zt}from"./DSduQYlM.js";import{B as ht,i as G,s as at}from"./DyxHvis7.js";import{e as Jt}from"./Bdl1seu_.js";import{c as it}from"./sznfKMQ3.js";const nt=0,Y=1;function Kt(e,t,s,r,a){j&&yt();var i=wt(),o=It,f=i?st(o):rt(o,!1,!1),u=i?st(o):rt(o,!1,!1),d=new ht(e);ft(()=>{var v=t(),x=!1;let l=j&&et(v)===(e.data===Et);if(l&&(xt(Ct()),Q(!1)),et(v)){var h=At(),y=!1;const n=m=>{if(!x){y=!0,h(!1),Tt.ensure(),j&&Q(!1);try{m()}finally{Nt(),Ot||Bt()}}};v.then(m=>{n(()=>{V(f,m),d.ensure(Y,r&&(g=>r(g,f)))})},m=>{n(()=>{if(V(u,m),d.ensure(Y,a&&(g=>a(g,u))),!a)throw u.v})}),j?d.ensure(nt,s):ct(()=>{y||n(()=>{d.ensure(nt,s)})})}else V(f,v),d.ensure(Y,r&&(n=>r(n,f)));return l&&Q(!0),()=>{x=!0}})}function M(e,t,...s){var r=new ht(e);ft(()=>{const a=t()??null;r.ensure(a,a&&(i=>a(i,...s)))},lt)}const Qt=()=>performance.now(),A={tick:e=>requestAnimationFrame(e),now:()=>Qt(),tasks:new Set};function mt(){const e=A.now();A.tasks.forEach(t=>{t.c(e)||(A.tasks.delete(t),t.f())}),A.tasks.size!==0&&A.tick(mt)}function Vt(e){let t;return A.tasks.size===0&&A.tick(mt),{promise:new Promise(s=>{A.tasks.add(t={c:e,f:s})}),abort(){A.tasks.delete(t)}}}function Z(e,t){ut(()=>{e.dispatchEvent(new CustomEvent(t))})}function Yt(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("")}function ot(e){const t={},s=e.split(";");for(const r of s){const[a,i]=r.split(":");if(!a||i===void 0)break;const o=Yt(a.trim());t[o]=i.trim()}return t}const Xt=e=>e;function ve(e,t,s,r){var k;var a=(e&qt)!==0,i=(e&zt)!==0,o=a&&i,f=(e&Mt)!==0,u=o?"both":a?"in":"out",d,v=t.inert,x=t.style.overflow,l,h;function y(){return ut(()=>d??(d=s()(t,(r==null?void 0:r())??{},{direction:u})))}var n={is_global:f,in(){var c;if(t.inert=v,!a){h==null||h.abort(),(c=h==null?void 0:h.reset)==null||c.call(h);return}i||l==null||l.abort(),l=X(t,y(),h,1,()=>{Z(t,"introend"),l==null||l.abort(),l=d=void 0,t.style.overflow=x})},out(c){if(!i){c==null||c(),d=void 0;return}t.inert=!0,h=X(t,y(),l,0,()=>{Z(t,"outroend"),c==null||c()})},stop:()=>{l==null||l.abort(),h==null||h.abort()}},m=St;if(((k=m.nodes).t??(k.t=[])).push(n),a&&Wt){var g=f;if(!g){for(var _=m.parent;_&&(_.f&lt)!==0;)for(;(_=_.parent)&&(_.f&Rt)===0;);g=!_||(_.f&Ft)!==0}g&&Lt(()=>{Dt(()=>n.in())})}}function X(e,t,s,r,a){var i=r===1;if(Pt(t)){var o,f=!1;return ct(()=>{if(!f){var m=t({direction:i?"in":"out"});o=X(e,m,s,r,a)}}),{abort:()=>{f=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(s==null||s.deactivate(),!(t!=null&&t.duration)&&!(t!=null&&t.delay))return Z(e,i?"introstart":"outrostart"),a(),{abort:S,deactivate:S,reset:S,t:()=>r};const{delay:u=0,css:d,tick:v,easing:x=Xt}=t;var l=[];if(i&&s===void 0&&(v&&v(0,1),d)){var h=ot(d(0,1));l.push(h,h)}var y=()=>1-r,n=e.animate(l,{duration:u,fill:"forwards"});return n.onfinish=()=>{n.cancel(),Z(e,i?"introstart":"outrostart");var m=(s==null?void 0:s.t())??1-r;s==null||s.abort();var g=r-m,_=t.duration*Math.abs(g),k=[];if(_>0){var c=!1;if(d)for(var O=Math.ceil(_/16.666666666666668),I=0;I<=O;I+=1){var R=m+g*x(I/O),C=ot(d(R,1-R));k.push(C),c||(c=C.overflow==="hidden")}c&&(e.style.overflow="hidden"),y=()=>{var B=n.currentTime;return m+g*x(B/_)},v&&Vt(()=>{if(n.playState!=="running")return!1;var B=y();return v(B,1-B),!0})}n=e.animate(k,{duration:_,fill:"forwards"}),n.onfinish=()=>{y=()=>r,v==null||v(r,1-r),a()}},{abort:()=>{n&&(n.cancel(),n.effect=null,n.onfinish=S)},deactivate:()=>{a=S},reset:()=>{r===0&&(v==null||v(1,0))},t:()=>y()}}const $t=e=>e;function te(e){const t=e-1;return t*t*t+1}function he(e,{delay:t=0,duration:s=400,easing:r=$t}={}){const a=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:r,css:i=>`opacity: ${i*a}`}}function me(e,{delay:t=0,duration:s=400,easing:r=te,start:a=0,opacity:i=0}={}){const o=getComputedStyle(e),f=+o.opacity,u=o.transform==="none"?"":o.transform,d=1-a,v=f*(1-i);return{delay:t,duration:s,easing:r,css:(x,l)=>`
			transform: ${u} scale(${1-d*l});
			opacity: ${f-v*l}
		`}}var D,q;const J=class J extends EventTarget{constructor(s,{id:r,component:a,props:i}){super();b(this,"_props");b(this,"result",ee());b(this,"id");b(this,"component");b(this,"modals");F(this,D,W(!1));F(this,q,Ht(()=>this.modals.stack.length===0?!1:this.modals.stack[this.modals.stack.length-1].id===this.id&&!this.modals.transitioning));b(this,"close",(...s)=>{var a;if(((a=this.onBeforeClose)==null?void 0:a.call(this))===!1)return!1;const r=s[0];return this.dispatchEvent(new CustomEvent("close",{detail:r})),this.result.resolve(r),!0});b(this,"onBeforeClose");this.id=r||(J._idCounter++).toString(),this.component=a,this._props=i??{},this.modals=s}get exitBeforeEnter(){return p(T(this,D))}set exitBeforeEnter(s){P(T(this,D),s,!0)}get isOpen(){return p(T(this,q))}set isOpen(s){P(T(this,q),s)}get index(){return this.modals.stack.indexOf(this)}get props(){return{...this._props,id:this.id,index:this.index,isOpen:this.isOpen,close:this.close}}get promise(){return this.result.promise}};D=new WeakMap,q=new WeakMap,b(J,"_idCounter",0);let $=J;function ee(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}var z,H,U;class se{constructor(){F(this,z,W(Ut([])));F(this,H,W(null));F(this,U,W(!1));b(this,"open",async(t,s,r)=>{var o;if(this.transitioning)return;if(r!=null&&r.replace&&!((o=this.stack[this.stack.length-1])==null?void 0:o.close()))throw new Error("Current modal prevented closing");this.action="push";const a=this.stack[this.stack.length-1];a!=null&&a.exitBeforeEnter&&(this.transitioning=!0);const i=new $(this,{id:r==null?void 0:r.id,component:t,props:s});return this.stack.push(i),i.addEventListener("close",()=>{i.exitBeforeEnter&&(this.transitioning=!0),this.stack.indexOf(i)>-1&&this.stack.splice(this.stack.indexOf(i),1),this.action="pop"},{once:!0}),i.promise});b(this,"close",(t=1)=>{if(typeof t!="number"||t<1)throw new Error(`amount must be a number greater than 0. Received ${t}`);const s=this.stack.slice(this.stack.length-t).reverse();let r=0;for(const a of s){if(!a.close())break;r++}return t===r});b(this,"closeById",t=>{const s=this.stack.find(r=>r.id===t);return s?s.close():!1});b(this,"closeAll",()=>this.close(this.stack.length))}get stack(){return p(T(this,z))}set stack(t){P(T(this,z),t,!0)}get action(){return p(T(this,H))}set action(t){P(T(this,H),t,!0)}get transitioning(){return p(T(this,U))}set transitioning(t){P(T(this,U),t,!0)}}z=new WeakMap,H=new WeakMap,U=new WeakMap;const re=Symbol("modal");function ae(e){jt(re,e)}function ie(e,t){dt(t,!0),ae(t.modal);var s=N(),r=w(s);M(r,()=>t.children),E(e,s),vt()}const L=new se;var ne=Zt("<!> <!>",1);function _e(e,t){dt(t,!0);function s(f){return typeof f.prototype>"u"}var r=ne(),a=w(r);{var i=f=>{var u=N(),d=w(u);M(d,()=>t.backdrop??S,()=>L),E(f,u)};G(a,f=>{L.stack.length>0&&f(i)})}var o=Gt(a,2);Jt(o,19,()=>L.stack,f=>f.id,(f,u)=>{ie(f,{get modal(){return p(u)},children:(d,v)=>{var x=N(),l=w(x);{var h=n=>{var m=N(),g=w(m);Kt(g,()=>p(u).component(),_=>{var k=N(),c=w(k);M(c,()=>t.loading??S,()=>L),E(_,k)},(_,k)=>{var c=N(),O=w(c);{var I=C=>{var B=N(),K=w(B);M(K,()=>t.modal,()=>({component:p(k).default,props:p(u).props}),()=>L),E(C,B)},R=C=>{var B=N(),K=w(B);it(K,()=>p(k).default,(_t,pt)=>{pt(_t,at(()=>p(u).props))}),E(C,B)};G(O,C=>{t.modal?C(I):C(R,!1)})}E(_,c)}),E(n,m)},y=n=>{var m=N(),g=w(m);{var _=c=>{var O=N(),I=w(O);M(I,()=>t.modal,()=>({component:p(u).component,props:p(u).props}),()=>L),E(c,O)},k=c=>{var O=N(),I=w(O);it(I,()=>p(u).component,(R,C)=>{C(R,at(()=>p(u).props))}),E(c,O)};G(g,c=>{t.modal?c(_):c(k,!1)})}E(n,m)};G(l,n=>{s(p(u).component)?n(h):n(y,!1)})}E(d,x)},$$slots:{default:!0}})}),E(e,r),vt()}export{_e as M,M as a,he as f,L as m,me as s,ve as t};
